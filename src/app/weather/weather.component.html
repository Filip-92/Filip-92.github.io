<div class="container">
    <div class="text-right">
        <button class="floating-btn" *ngIf="checkIfScrolled()" (click)="scrollToTop()">&#8593; Top</button>
    </div>
    <div class="card mt-3 mb-3">
        <div class="text-center" id="current">
            <div id="timer" class="row mt-3">
                <div class="col-6 col-md-6 text-left">
                    <h3>
                        <i class="fa fa-clock mr-2"></i>{{time | date:'HH:mm':'UTC ' + sign + UTC}}
                        <span (click)="refresh()">
                            <img id="refresh" src="/assets/refresh.png" alt="" (click)="refresh()">
                        </span>
                    </h3>
                </div>
                <div class="col-6 col-md-4 text-center">
                    <h3>
                        {{weatherData?.name}}
                    </h3>
                    <h6 *ngIf="weatherData?.name !== coordinates.features[0]?.properties?.city">
                        ({{coordinates.features[0]?.properties?.city}})
                    </h6>
                </div>
            </div>
            <app-current-weather [weatherData]="weatherData" [target]="target"></app-current-weather>
            <form
            [formGroup]="weatherSearchForm"
            (ngSubmit)="checkCoordinates()">
            <div id="form" class="row mt-4">
                <div class="form-group col-8 col-md-9 col-md-8">
                    <p id="label" class="text-left">Wpisz nazwÄ™ miasta:</p>
                    <input 
                        class="form-control" 
                        type="text"
                        id="weatherLocation"
                        aria-describedby="weatherLocation"
                        placeholder="Wpisz miasto"
                        formControlName="location"
                        >
                </div>
                <div id="buttons" class="text-left col-4 col-md-3 col-md-3">
                    <button type="submit" class="btn btn-success btn-small mb-3">
                        Szukaj<i class="fa fa-search ml-2"></i>
                    </button>
                </div>
            </div>
        </form>
        </div>
    </div>
    <div id="gif" *ngIf="weatherData?.weather[0]?.icon === '04d' || weatherData?.weather[0]?.icon === '03d'">
        <img src="/assets/cloudy.gif" alt="">
    </div>
    <div id="gif" *ngIf="weatherData?.weather[0]?.icon === '10d'">
        <img src="/assets/rain.gif" alt="">
    </div>
    <h3 class="text-center mt-3 mb-4">
        Godzinowo
    </h3>
    <div id="hourly" class="card mt-3">
        <app-hourly-weather [weatherDataForecast]="weatherDataForecast"></app-hourly-weather>
    </div>
    <div *ngIf="weatherDataForecast !== undefined" class="text-center mt-3">
        <h3 class="mt-3 mb-4">Prognoza</h3>
        <div class="card">
            <app-weekly-forecast [weatherDataForecast]="weatherDataForecast" [range]="range(0, 40, 1)" [days]="1"></app-weekly-forecast>
        </div>
        <div class="card">
            <app-weekly-forecast [weatherDataForecast]="weatherDataForecast" [range]="range(0, 40, 1)" [days]="2"></app-weekly-forecast>
        </div>
        <div class="card">
            <app-weekly-forecast [weatherDataForecast]="weatherDataForecast" [range]="range(0, 40, 1)" [days]="3"></app-weekly-forecast>
        </div>
        <div class="card">
            <app-weekly-forecast [weatherDataForecast]="weatherDataForecast" [range]="range(0, 40, 1)" [days]="4"></app-weekly-forecast>
        </div>
    </div>

    <div id="meme" class="text-center mt-5 mb-5">
        <!-- <img src="{{meme?.url}}" alt=""> -->
        <div *ngIf="meme?.url?.includes('youtube') && meme?.url?.length < 1000">
            <iframe width="400" height="300" [src]="trustedUrl | safe" allowfullscreen></iframe>
        </div>
        <img src="{{meme?.url}}" class="card-img-top" onError="this.src='https://memegenerator.net/img/images/14687350.jpg'" *ngIf="checkURL(meme?.url) && !meme?.url?.includes('youtube-nocookie') && meme?.url?.length < 1000"/>
        <video src="{{meme?.url}}" class="card-img-top" *ngIf="!checkURL(meme?.url) && !meme?.url?.includes('youtube-nocookie') && meme?.url?.length < 1000" controls></video>
        <button class="btn btn-small btn-success mt-3" (click)="getMeme()">Losuj</button>
    </div>
    <div #target></div>
</div>
<!-- <a href="https://www.flaticon.com/free-icons/refresh" title="refresh icons">Refresh icons created by Freepik - Flaticon</a> -->